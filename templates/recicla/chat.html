{% extends 'base/base_logeado.html' %}

{% block title %}

<title>Chat</title>

{% endblock%}

{% block content %}
    <h1>Ingresa al chat de consultas</h1>

    <input id="btnconsultas" type="button" value="Enter"/>
    <br>
    <h1>Crea o unete a una nueva conversacion privada</h1>
    <br>
    <input id="room-name-input" type="text" size="100"/>
    <br/>
    <input id="room-name-submit" type="button" value="Enter" onclick="mandardatos()" />

        <script>

            function validar() {
                valor = document.getElementById("room-name-input").value;
                if (valor.length == 0) {
                    return false;
                }
                return true;
            }

            function mandardatos() {
                if (validar() == true) {
                    document.querySelector('#room-name-input').focus();
                    document.querySelector('#room-name-input').onkeyup = function(e) {
                        if (e.keyCode === 13) {  // enter, return
                            document.querySelector('#room-name-submit').click();
                        }
                    };

                    document.querySelector('#room-name-submit').onclick = function(e) {
                    var roomName = document.querySelector('#room-name-input').value;
                    window.location.pathname = '/chat/' + roomName + '/';
                    };
                }
                else{
                    alert('Debes ingresar el nombre del canal');

                }
            }

            document.querySelector('#btnconsultas').onclick = function(e) {
                var roomName2 = 'consultas';
                window.location.pathname = '/chat/' + roomName2 + '/';
            };

        </script>

{% endblock %}